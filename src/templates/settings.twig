{% extends "_layouts/cp" %}
{% import '_includes/forms' as forms %}

{% set crumbs = [
    { label: craft.abandonedcart.getPluginName(), url: url('abandoned-cart/settings') },
    { label: 'Settings' | t('app'), url: url('abandoned-cart/settings') }
] %}

{% set selectedSubnavItem = 'settings' %}

{% set fullPageForm = true %}

{% set content %}

<input type="hidden" name="action" value="plugins/save-plugin-settings">
<input type="hidden" name="pluginHandle" value="abandoned-cart">

{% namespace 'settings' %}

{{ forms.textField({
    first: true,
    label: "Plugin Name",
    name: 'pluginName',
    value: settings.pluginName,
    instructions: 'Plugin nickname',
    errors: settings.getErrors('pluginName')
}) }}

{{ forms.textField({
    label: "Restore Link Expiry",
    name: 'restoreExpiryHours',
    value: settings.restoreExpiryHours,
    instructions: 'How long should abandoned cart restore links last for.<br />Default: 48 hours',
    errors: settings.getErrors('restoreExpiryHours')
}) }}

{{ forms.textField({
    label: "1st Reminder Delay",
    name: 'firstReminderDelay',
    value: settings.firstReminderDelay,
    instructions: 'How long after a cart has been abandoned should the 1st reminder be sent?<br />Default: 1 hour',
    errors: settings.getErrors('firstReminderDelay')
}) }}

{{ forms.textField({
    label: "2nd Reminder Delay",
    name: 'secondReminderDelay',
    value: settings.secondReminderDelay,
    instructions: 'How long after a cart has been abandoned should the 2nd reminder be sent?<br />Default: 12 hours',
    errors: settings.getErrors('secondReminderDelay')
}) }}

{{ forms.textField({
    label: "1st Reminder Template",
    name: 'firstReminderTemplate',
    value: settings.firstReminderTemplate,
    instructions: 'Use a custom template for the 1st reminder email<br />Default: abandoned-cart/emails/first',
    errors: settings.getErrors('firstReminderTemplate')
}) }}

{{ forms.textField({
    label: "1st Reminder Email Subject",
    name: 'firstReminderSubject',
    value: settings.firstReminderSubject,
    errors: settings.getErrors('firstReminderSubject')
}) }}

{{ forms.textField({
    label: "2nd Reminder Email Template",
    name: 'secondReminderTemplate',
    value: settings.secondReminderTemplate,
    instructions: 'Use a custom template for the 2nd reminder email<br />Default: abandoned-cart/emails/second',
    errors: settings.getErrors('secondReminderTemplate')
}) }}

{{ forms.textField({
    label: "2nd Reminder Subject",
    name: 'secondReminderSubject',
    value: settings.secondReminderSubject,
    errors: settings.getErrors('secondReminderSubject')
}) }}

{{ forms.textField({
    label: "Discount Code",
    name: 'discountCode',
    value: settings.discountCode,
    instructions: 'Enter the discount code that abandoned carts can use.<br />Note: this simply displays the code in the email template, customers will need to apply it.<br />Discount rules and conditions should be set as required.',
    errors: settings.getErrors('discountCode')
}) }}


{% endnamespace %}

{% endset %}
